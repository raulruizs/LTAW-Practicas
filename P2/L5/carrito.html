<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito de Compras</title>
    <link rel="stylesheet" href="carrito.css">
</head>
<body>
    <header>
        <h1>ðŸ›’ Carrito de Compras</h1> 
    </header>

    <div id="carrito"></div>

    <button onclick="vaciarCarrito()">Vaciar Carrito</button>
    <a href="index.html">Seguir comprando</a>
    <a href="finalizar_compra.html"><button>Finalizar Compra</button></a>

    <script>
        function leerCookie(nombre) {
            const cookies = document.cookie.split(';');
            for (let c of cookies) {
                const [key, val] = c.trim().split('=');
                if (key === nombre) return decodeURIComponent(val);
            }
            return null;
        }

        function mostrarCarrito() {
            const carritoCookie = leerCookie("carrito");
            const carrito = carritoCookie ? JSON.parse(carritoCookie) : [];

            const carritoDiv = document.getElementById("carrito");

            if (carrito.length === 0) {
                carritoDiv.innerHTML = "<p>El carrito estÃ¡ vacÃ­o.</p>";
                return;
            }

            carritoDiv.innerHTML = carrito.map((producto, index) => 
                `<p>${producto.nombre} - ${producto.precio} â‚¬</p>`
            ).join("");

            const total = carrito.reduce((sum, p) => sum + p.precio, 0);
            carritoDiv.innerHTML += `<h3>Total: ${total.toFixed(2)} â‚¬</h3>`;
        }

        function vaciarCarrito() {
            // Borrar cookie del carrito
            document.cookie = "carrito=; Path=/; Max-Age=0";

            // Borrar stock visual
            localStorage.removeItem("stockVisual");

            // Refrescar la vista del carrito
            mostrarCarrito();
        }


        mostrarCarrito();
    </script>
</body>
</html>
